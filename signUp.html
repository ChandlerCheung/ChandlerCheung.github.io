<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注册</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/signUp.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
</head>

<body>
    <form action="" autocomplete="off">
        <h2>SignUp</h2>
        <input type="text" name="username" placeholder="设置用户名">
        <span class="msg"></span>
        <div class="password-wrapper">
            <input type="password" name="password" placeholder="设置密码">
            <i class="fa fa-eye" id="password"></i>
        </div>
        <span class="msg"></span>
        <div class="confirm-wrapper">
            <input type="password" name="confirm" placeholder="请再次输入上面密码">
            <i class="fa fa-eye" id="confirm"></i>
        </div>
        <span class="msg"></span>
        <input type="text" name="idCard" placeholder="请输入身份证号码">
        <span class="msg"></span>
        <div class="phoneAll">
            <select name="areaCode">
                <option value="+86">中国大陆 +86</option>
                <option value="+852">中国香港 +852</option>
                <option value="+852">中国澳门 +853</option>
                <option value="+852">中国台湾 +886</option>
                <option value="+852">日本 +81</option>
                <option value="+852">韩国 +82</option>
                <option value="+1">美国 +1</option>
                <option value="+7">俄罗斯 +7</option>
                <option value="+30">希腊 +30</option>
                <option value="+31">荷兰 +31</option>
                <option value="+32">比利时 +32</option>
                <option value="+33">法国 +33</option>
                <option value="+34">西班牙 +34</option>
                <option value="+351">葡萄牙 +351</option>
                <option value="+352">卢森堡 +352</option>
                <option value="+353">爱尔兰 +353</option>
                <option value="+354">冰岛 +354</option>
                <option value="+39">意大利 +39</option>
                <option value="+41">瑞士 +41</option>
                <option value="+43">奥地利 +43</option>
                <option value="+44">英国 +44</option>
                <option value="+45">丹麦 +45</option>
                <option value="+46">瑞典 +46</option>
                <option value="+47">挪威 +47</option>
                <option value="+48">波兰 +48</option>
                <option value="+49">德国 +49</option>
                <option value="+60">马来西亚 +60</option>
                <option value="+61">澳大利亚 +61</option>
                <option value="+62">印度尼西亚 +62</option>
                <option value="+63">菲律宾 +63</option>
                <option value="+64">新西兰 +64</option>
                <option value="+65">新加坡 +65</option>
                <option value="+66">泰国 +66</option>
            </select>
            <input type="text" name="phone" placeholder="输入手机号码">
        </div>
        <span class="msg"></span>
        <div class="code-wrapper">
            <input type="text" name="code" placeholder="短信验证码">
            <a class="code" href="#">发送验证码</a>
        </div>
        <span class="msg"></span>
        <select name="province">
            <option value="">请选择所在省份/直辖市</option>
            <option value="北京">北京</option>
            <option value="上海">上海</option>
            <option value="广东">广东</option>
            <option value="重庆">重庆</option>
            <option value="江苏">江苏</option>
            <option value="浙江">浙江</option>
            <option value="湖北">湖北</option>
            <option value="湖南">湖南</option>
            <option value="辽宁">辽宁</option>
            <option value="吉林">吉林</option>
            <option value="安徽">安徽</option>
            <option value="福建">福建</option>
            <option value="江西">江西</option>
            <option value="山东">山东</option>
            <option value="河南">河南</option>
            <option value="广西">广西</option>
            <option value="海南">海南</option>
            <option value="四川">四川</option>
            <option value="贵州">贵州</option>
            <option value="云南">云南</option>
            <option value="西藏">西藏</option>
            <option value="陕西">陕西</option>
            <option value="甘肃">甘肃</option>
            <option value="青海">青海</option>
            <option value="宁夏">宁夏</option>
            <option value="新疆">新疆</option>
            <option value="天津">天津</option>
            <option value="河北">河北</option>
            <option value="内蒙古">内蒙古</option>
            <option value="山西">山西</option>
            <option value="黑龙江">黑龙江</option>
            <option value="香港">香港</option>
            <option value="台湾">台湾</option>
            <option value="澳门">澳门</option>
        </select>
        <select name="city">
            <option value="">请选择所在城市/区县</option>
        </select>
        <div class="middle">
            <div class="agree">
                <input type="checkbox" id="agreeCheckbox">
                <label for="agreeCheckbox">已阅读并同意</label>
                <a href="#" class="agreeLink">《用户协议》</a> 和 <a href="#" class="agreeLink">《隐私政策》</a>
            </div>
            <a href="login.html" class="login">登录</a>
        </div>
        <button>确认</button>
        <button class="cancel">取消</button>
    </form>

    <script>
        const usernameInput = document.querySelector("[name=username]")
        usernameInput.addEventListener("change", verifyName)
        function verifyName() {
            const span = usernameInput.nextElementSibling
            const reg = /^[a-zA-Z0-9-_]{6,10}$/
            if (!reg.test(usernameInput.value)) {
                span.innerText = "输入不合法,请输入6~10位"
                return false
            }
            span.innerText = ""
            return true
        }

        const passwordInput = document.querySelector("[name=password]")
        passwordInput.addEventListener("change", verifyPwd)
        function verifyPwd() {
            const span = passwordInput.parentElement.nextElementSibling
            const reg = /^[a-zA-Z0-9_]{6,20}$/
            if (!reg.test(passwordInput.value)) {
                span.innerText = "输入不合法,6~20位数字字母符号组成"
                return false
            }
            span.innerText = ""
            return true
        }

        const togglePassword = document.querySelector("#password");
        togglePassword.addEventListener("click", function () {
            const type = passwordInput.getAttribute("type") === "password" ? "text" : "password"
            passwordInput.setAttribute("type", type)
            this.classList.toggle("fa-eye-slash")
            this.classList.toggle("fa-eye")
        })

        const confirmInput = document.querySelector("[name=confirm]")
        confirmInput.addEventListener("change", verifyConfirm)
        function verifyConfirm() {
            const span = confirmInput.parentElement.nextElementSibling
            if (confirmInput.value !== passwordInput.value) {
                span.innerText = "两次密码输入不一致"
                return false
            }
            span.innerText = ""
            return true
        }

        const toggleConfrimPassword = document.querySelector("#confirm");
        toggleConfrimPassword.addEventListener("click", function () {
            const type = confirmInput.getAttribute("type") === "password" ? "text" : "password"
            confirmInput.setAttribute("type", type)
            this.classList.toggle("fa-eye-slash")
            this.classList.toggle("fa-eye")
        })

        const idcardInput = document.querySelector("[name=idCard]")
        idcardInput.addEventListener("change", verifyidCard)
        function verifyidCard() {
            const span = idcardInput.nextElementSibling
            const reg = /^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9xX]$/
            if (!reg.test(idcardInput.value)) {
                span.innerText = "输入不合法,请输入正确的身份证号码"
                return false
            }
            span.innerText = ""
            return true
        }

        const codeInput = document.querySelector("[name=code]")
        codeInput.addEventListener("change", verifyCode)
        function verifyCode() {
            const span = codeInput.parentElement.nextElementSibling
            const reg = /^\d{6}$/
            if (!reg.test(codeInput.value)) {
                span.innerText = "输入不合法,6位数字"
                return false
            }
            span.innerText = ""
            return true
        }
        const codeSend = document.querySelector(".code")
        let flag = true
        codeSend.addEventListener("click", function () {
            if (flag) {
                flag = false
                let i = 60
                codeSend.innerHTML = `${i}秒后重新获取`
                const timerId = setInterval(function () {
                    i--
                    codeSend.innerText = `${i}秒后重新获取`
                    if (i === 0) {
                        clearInterval(timerId)
                        codeSend.innerHTML = `重新获取`
                        flag = true
                    }
                }, 1000)
            }
        })

        const cityArray1 = ["东城区", "西城区", "朝阳区", "海淀区", "丰台区", "石景山区", "通州区", "顺义区", "房山区", "大兴区", "昌平区", "怀柔区", "平谷区", "门头沟区", "密云区", "延庆区"]
        const cityArray2 = ["黄浦区", "徐汇区", "长宁区", "静安区", "普陀区", "虹口区", "杨浦区", "闵行区", "宝山区", "嘉定区", "浦东新区", "金山区", "松江区", "青浦区", "奉贤区", "崇明区"]
        const cityArray3 = ["广州市", "深圳市", "东莞市", "佛山市", "珠海市", "惠州市", "中山市", "汕头市", "江门市", "湛江市", "茂名市", "肇庆市", "梅州市", "汕尾市", "阳江市", "清远市", "揭阳市", "云浮市"]
        const cityArray4 = ["万州区", "涪陵区", "渝中区", "大渡口区", "江北区", "沙坪坝区", "九龙坡区", "南岸区", "北碚区", "綦江区", "大足区", "渝北区", "巴南区", "黔江区", "长寿区", "江津区", "合川区", "永川区", "南川区", "璧山区", "铜梁区", "潼南区", "荣昌区", "开州区", "梁平区", "武隆区", "城口县", "丰都县", "垫江县", "忠县", "云阳县", "奉节县", "巫山县", "巫溪县", "石柱土家族自治县", "秀山土家族苗族自治县", "酉阳土家族苗族自治县", "彭水苗族土家族自治县", "两江新区"]
        const cityArray5 = ["南京市", "无锡市", "徐州市", "常州市", "苏州市", "南通市", "连云港市", "淮安市", "盐城市", "扬州市", "镇江市", "泰州市", "宿迁市"]
        const cityArray6 = ["杭州市", "宁波市", "温州市", "嘉兴市", "湖州市", "绍兴市", "金华市", "衢州市", "舟山市", "台州市", "丽水市"]
        const cityArray7 = ["武汉市", "黄石市", "十堰市", "宜昌市", "襄阳市", "鄂州市", "荆门市", "孝感市", "荆州市", "黄冈市", "咸宁市", "随州市", "恩施土家族苗族自治州", "仙桃市", "潜江市", "天门市", "神农架林区"]
        const cityArray8 = ["长沙市", "株洲市", "湘潭市", "衡阳市", "邵阳市", "岳阳市", "常德市", "张家界市", "益阳市", "郴州市", "永州市", "怀化市", "娄底市", "湘西土家族苗族自治州"]
        const cityArray9 = ["沈阳市", "大连市", "鞍山市", "抚顺市", "本溪市", "丹东市", "锦州市", "营口市", "阜新市", "辽阳市", "盘锦市", "铁岭市", "朝阳市", "葫芦岛市"]
        const cityArray10 = ["长春市", "吉林市", "四平市", "辽源市", "通化市", "白山市", "松原市", "白城市", "延边朝鲜族自治州"]
        const cityArray11 = ["合肥市", "芜湖市", "蚌埠市", "淮南市", "马鞍山市", "淮北市", "铜陵市", "安庆市", "黄山市", "滁州市", "阜阳市", "宿州市", "六安市", "亳州市", "池州市", "宣城市"]
        const cityArray12 = ["福州市", "厦门市", "漳州市", "泉州市", "三明市", "南平市", "龙岩市", "宁德市"]
        const cityArray13 = ["南昌市", "景德镇市", "萍乡市", "九江市", "新余市", "鹰潭市", "赣州市", "吉安市", "宜春市", "抚州市", "上饶市"]
        const cityArray14 = ["济南市", "青岛市", "淄博市", "枣庄市", "东营市", "烟台市", "潍坊市", "济宁市", "泰安市", "威海市", "日照市", "莱芜市", "临沂市", "德州市", "聊城市", "滨州市", "菏泽市"]
        const cityArray15 = ["郑州市", "开封市", "洛阳市", "平顶山市", "安阳市", "鹤壁市", "新乡市", "焦作市", "濮阳市", "许昌市", "漯河市", "三门峡市", "南阳市", "商丘市", "信阳市", "周口市", "驻马店市", "济源市"]
        const cityArray16 = ["南宁市", "柳州市", "桂林市", "梧州市", "北海市", "防城港市", "钦州市", "贵港市", "玉林市", "百色市", "贺州市", "河池市", "来宾市", "崇左市"]
        const cityArray17 = ["海口市", "三亚市", "三沙市", "儋州市", "五指山市", "琼海市", "文昌市", "万宁市", "东方市", "定安县", "屯昌县", "澄迈县", "临高县", "白沙黎族自治县", "昌江黎族自治县", "乐东黎族自治县", "陵水黎族自治县", "保亭黎族苗族自治县", "琼中黎族苗族自治县"]
        const cityArray18 = ["成都市", "自贡市", "攀枝花市", "泸州市", "德阳市", "绵阳市", "广元市", "遂宁市", "内江市", "乐山市", "南充市", "眉山市", "宜宾市", "广安市", "达州市", "雅安市", "巴中市", "资阳市", "阿坝藏族羌族自治州", "甘孜藏族自治州", "凉山彝族自治州"]
        const cityArray19 = ["贵阳市", "六盘水市", "遵义市", "安顺市", "毕节市", "铜仁市", "黔西南布依族苗族自治州", "黔东南苗族侗族自治州", "黔南布依族苗族自治州"]
        const cityArray20 = ["昆明市", "曲靖市", "玉溪市", "保山市", "昭通市", "丽江市", "普洱市", "临沧市", "楚雄彝族自治州", "红河哈尼族彝族自治州", "文山壮族苗族自治州", "西双版纳傣族自治州", "大理白族自治州", "德宏傣族景颇族自治州", "怒江傈僳族自治州", "迪庆藏族自治州"]
        const cityArray21 = ["拉萨市", "日喀则市", "昌都市", "林芝市", "山南市", "那曲地区", "阿里地区"]
        const cityArray22 = ["西安市", "铜川市", "宝鸡市", "咸阳市", "渭南市", "延安市", "汉中市", "榆林市", "安康市", "商洛市"]
        const cityArray23 = ["兰州市", "嘉峪关市", "金昌市", "白银市", "天水市", "武威市", "张掖市", "平凉市", "酒泉市", "庆阳市", "定西市", "陇南市", "临夏回族自治州", "甘南藏族自治州"]
        const cityArray24 = ["西宁市", "海东市", "海北藏族自治州", "黄南藏族自治州", "海南藏族自治州", "果洛藏族自治州", "玉树藏族自治州", "海西蒙古族藏族自治州"]
        const cityArray25 = ["银川市", "石嘴山市", "吴忠市", "固原市", "中卫市"]
        const cityArray26 = ["乌鲁木齐市", "克拉玛依市", "吐鲁番市", "哈密市", "昌吉回族自治州", "博尔塔拉蒙古自治州", "巴音郭楞蒙古自治州", "阿克苏地区", "克孜勒苏柯尔克孜自治州", "喀什地区", "和田地区", "伊犁哈萨克自治州", "塔城地区", "阿勒泰地区", "自治区直辖县级行政区划"]
        const cityArray27 = ["和平区", "河东区", "河西区", "南开区", "河北区", "红桥区", "东丽区", "西青区", "津南区", "北辰区", "武清区", "宝坻区", "滨海新区", "宁河区", "静海区", "蓟州区"]
        const cityArray28 = ["石家庄市", "唐山市", "秦皇岛市", "邯郸市", "邢台市", "保定市", "张家口市", "承德市", "沧州市", "廊坊市", "衡水市"]
        const cityArray29 = ["呼和浩特市", "包头市", "乌海市", "赤峰市", "通辽市", "鄂尔多斯市", "呼伦贝尔市", "巴彦淖尔市", "乌兰察布市", "兴安盟", "锡林郭勒盟", "阿拉善盟"]
        const cityArray30 = ["太原市", "大同市", "阳泉市", "长治市", "晋城市", "朔州市", "晋中市", "运城市", "忻州市", "临汾市", "吕梁市"]
        const cityArray31 = ["哈尔滨市", "齐齐哈尔市", "鸡西市", "鹤岗市", "双鸭山市", "大庆市", "伊春市", "佳木斯市", "七台河市", "牡丹江市", "黑河市", "绥化市", "大兴安岭地区"]
        const cityArray32 = ["中西区", "湾仔区", "东区", "南区", "油尖旺区", "深水埗区", "九龙城区", "黄大仙区", "观塘区", "北区", "大埔区", "沙田区", "西贡区", "荃湾区", "屯门区", "元朗区", "葵青区", "离岛区"]
        const cityArray33 = ["台北市", "高雄市", "基隆市", "台中市", "台南市", "新竹市", "嘉义市", "新北市", "宜兰县", "桃园县", "新竹县", "苗栗县", "彰化县", "南投县", "云林县", "嘉义县", "屏东县", "台东县", "花莲县", "澎湖县", "金门县", "连江县"]
        const cityArray34 = ["澳门半岛", "氹仔岛", "路环岛"]
        const provinceSelect = document.querySelector("[name=province]")
        const citySelect = document.querySelector("[name=city]")
        provinceSelect.addEventListener("change", updateCityOptions)
        function updateCityOptions() {
            switch (provinceSelect.value) {
                case "北京":
                    addCityOptions(cityArray1)
                    break
                case "上海":
                    addCityOptions(cityArray2)
                    break
                case "广东":
                    addCityOptions(cityArray3)
                    break
                case "重庆":
                    addCityOptions(cityArray4)
                    break
                case "江苏":
                    addCityOptions(cityArray5)
                    break
                case "浙江":
                    addCityOptions(cityArray6)
                    break
                case "湖北":
                    addCityOptions(cityArray7)
                    break
                case "湖南":
                    addCityOptions(cityArray8)
                    break
                case "辽宁":
                    addCityOptions(cityArray9)
                    break
                case "吉林":
                    addCityOptions(cityArray10)
                    break
                case "安徽":
                    addCityOptions(cityArray11)
                    break
                case "福建":
                    addCityOptions(cityArray12)
                    break
                case "江西":
                    addCityOptions(cityArray13)
                    break
                case "山东":
                    addCityOptions(cityArray14)
                    break
                case "河南":
                    addCityOptions(cityArray15)
                    break
                case "广西":
                    addCityOptions(cityArray16)
                    break
                case "海南":
                    addCityOptions(cityArray17)
                    break
                case "四川":
                    addCityOptions(cityArray18)
                    break
                case "贵州":
                    addCityOptions(cityArray19)
                    break
                case "云南":
                    addCityOptions(cityArray20)
                    break
                case "西藏":
                    addCityOptions(cityArray21)
                    break
                case "陕西":
                    addCityOptions(cityArray22)
                    break
                case "甘肃":
                    addCityOptions(cityArray23)
                    break
                case "青海":
                    addCityOptions(cityArray24)
                    break
                case "宁夏":
                    addCityOptions(cityArray25)
                    break
                case "新疆":
                    addCityOptions(cityArray26)
                    break
                case "天津":
                    addCityOptions(cityArray27)
                    break
                case "河北":
                    addCityOptions(cityArray28)
                    break
                case "内蒙古":
                    addCityOptions(cityArray29)
                    break
                case "山西":
                    addCityOptions(cityArray30)
                    break
                case "黑龙江":
                    addCityOptions(cityArray31)
                    break
                case "香港":
                    addCityOptions(cityArray32)
                    break
                case "台湾":
                    addCityOptions(cityArray33)
                    break
                case "澳门":
                    addCityOptions(cityArray34)
                    break
                default:
                    citySelect.innerHTML = `<option value="">请选择所在城市/区县</option>`
            }
        }
        function addCityOptions(cityArray) {
            citySelect.innerHTML = `<option value="">请选择所在城市/区县</option>`
            cityArray.forEach(city => {
                citySelect.innerHTML += `<option>${city}</option>`
            })
        }

        const form = document.querySelector("form")
        const checkbox = document.querySelector("[type=checkbox]")
        form.addEventListener("submit", function (e) {
            e.preventDefault()
            if (!verifyName() || !verifyidCard() || !verifyCode() || !verifyPwd() || !verifyConfirm()) {
                alert("请填写完整信息")
                return
            }
            if (!checkbox.checked) {
                alert("请勾选同意协议")
                return
            }
            alert("注册成功")
            location.href = "login.html"
        })

        const cancelBtn = document.querySelector(".cancel")
        cancelBtn.addEventListener("click", function (e) {
            location.href = "index.html"
            e.preventDefault()
        })

    </script>
</body>

</html>
